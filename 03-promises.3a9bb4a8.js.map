{"mappings":"YACA,IAAMA,EAAOC,SAASC,cAAc,SAuBpC,SAASC,EAAcC,EAAUC,GAGPC,KAAKC,Q,CAxB/BP,EAAKQ,iBAAiB,UACtB,WACEC,MAAMC,iBAIP,IAHC,IAAMC,EAASX,EAAKW,OAAOC,MACrBP,EAAQL,EAAKK,MAAMO,MAEjBC,GADKb,EAAKc,KAAKF,MACX,GAAGC,EAAEF,EAAQE,GAAG,EAC5BV,EAAcU,EAAGR,E","sources":["src/js/03-promises.js"],"sourcesContent":["\nconst form = document.querySelector(\".form\");\n\nform.addEventListener(\"submit\", handleSubmit);\nfunction handleSubmit() {\n  event.preventDefault();\n  const amount = form.amount.value\n  const delay = form.delay.value\n  const step = form.step.value\n for (let i = 0; i<amount; i+=1){\n  createPromise(i, delay)\n}\n  // const {\n  //   elements: { login, password }\n  // } = event.currentTarget;\n\n  // if (login.value === \"\" || password.value === \"\") {\n  //   return console.log(\"Please fill in all the fields!\");\n  // }\n\n  // console.log(`Login: ${login.value}, Password: ${password.value}`);\n  // event.currentTarget.reset();\n}\n\nfunction createPromise(position, delay) {\n \n\n    const shouldResolve = Math.random() > 0.3;\n    if (shouldResolve) {\n      // Fulfill\n    } else {\n      // Reject\n    }\n  }\n\n\n\n\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/allSettled\n\n// Мікро процеси мають більший пріорітет ніж макро\n\n// Мікро процеси\n// 1 Promise\n// 2 Observer\n\n// Макро процеси\n// 1 setTimeout\n// 2 setInterval\n// https://developer.mozilla.org/en-US/docs/Web/API/Window/setImmediate\n// 3 setImmediate\n//https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame\n// 4 requestAnimationFrame\n\n// console.log(\"1\");\n\n// setTimeout(() => console.log(\"2\"), 10);\n\n// Promise.resolve(\"3\").then((value) => console.log(value));\n// Promise.reject(\"4\").then((value) => console.log(value)).catch(err=>console.log(err));\n// Promise.resolve(\"5\").then((value) => console.log(value));\n// setTimeout(() => console.log(\"6\"), 0);\n// console.log(\"7\");\n\n// console.log(\"1\");\n// setTimeout(() => {\n//   console.log(\"2\");\n//   Promise.resolve('3').then(value => console.log(value))\n// }, 10);\n\n// console.log(\"4\");\n\n// const promise = new Promise((res, rej) => {\n//   setTimeout(() => {\n//     const val = Math.random();\n//     if (val > 0.2) {\n//       res(\"Yeeees\");\n//     } else {\n//       rej(\"Noooo\");\n//     }\n//   }, 3000);\n// });\n// console.log(promise);\n\n// promise\n//   .then((value) => {\n//     return value + \" 😎\";\n//   })\n//   .then((value) => {\n//     console.log(value, qwerty);\n//   })\n//   .then(()=>{console.log('last then')})\n//   .catch((err) => {\n//     console.log(err);\n//   })\n//   .finally(() => {\n//     console.log(\"after\");\n//   });\n\n// const promise = fetch(\"https://pokeapi.co/api/v2/pokemon/ditto\");\n\n// console.log(promise);\n\n// promise\n// .then((resp) => resp.json())\n// .then(data => console.log(data))\n// .catch((err) => console.log(err));\n\n// const start = document.querySelector(\".js-start\");\n// const container = document.querySelector(\".js-container\");\n// // console.log(...container.children);\n// start.addEventListener(\"click\", onStart);\n\n// function onStart() {\n//   // const result = [];\n//   // [...container.children].forEach((box) => (box.textContent = \"\"));\n\n//   [...container.children].forEach((box, i) => {\n//     // console.log('i',i)\n//     createPromise(i)\n//       .then((smile) => {\n//         box.textContent = smile;\n//         // result.push(\"1\");\n//       })\n//       .catch((smile) => (box.textContent = smile))\n      // .finally(() => {\n      //   setTimeout(() => {\n      //     // if (i === container.children.length - 1) {\n      //       if (!result.length || result.length === 3) {\n      //         alert(\"Winner\");\n      //       } else {\n      //         alert(\"Lost money\");\n      //       // }\n      //     }\n      //   },500);\n      // });\n//   });\n// }\n\n// function createPromise(delay) {\n//   return new Promise((res, rej) => {\n//     setTimeout(() => {\n//       const random = Math.random();\n//       if (random > 0.5) {\n//         res(\"🤑\");\n//       } else {\n//         rej(\"😈\");\n//       }\n//     }, 1000 * delay);\n//   });\n// }\n\n// function onStart() {\n//   let counter = 0;\n\n//   [...container.children].forEach((box) => (box.textContent = \"\"));\n\n//   const promises = [...container.children].map(( _, i) => createPromise(i));\n\n//   Promise.allSettled(promises).then((items) => {\n//     console.log(items);\n//     items.forEach((item, i) => {\n//       setTimeout(() => {\n//         if (item.status === \"fulfilled\") {\n//           counter += 1;\n//         }\n//         console.log(item);\n//         container.children[i].textContent = item.value || item.reason;\n\n//         if (container.children.length - 1 === i) {\n//           setTimeout(() => {\n//             if (counter === container.children.length || !counter) {\n//               alert(\"Winner\");\n//             } else {\n//               alert(\"Lost money\");\n//             }\n//           }, 500);\n//         }\n//       }, i * 1000);\n//     });\n//   });\n// }\n\n// function createPromise() {\n//   return new Promise((res, rej) => {\n//     const random = Math.random();\n//     if (random > 0.5) {\n//       res(\"🤑\");\n//     } else {\n//       rej(\"😈\");\n//     }\n//   });\n// }\n\n\n"],"names":["$ce04d3a99e08e73b$var$form","document","querySelector","$ce04d3a99e08e73b$var$createPromise","position","delay","Math","random","addEventListener","event","preventDefault","amount","value","i","step"],"version":3,"file":"03-promises.3a9bb4a8.js.map"}